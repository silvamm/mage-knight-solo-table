<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="description" content="Mage Knight Dummy Player">
    <meta name="keywords" content="mage,knight,dummy,player,app,solo,cooperative">
    <link rel="apple-touch-icon" href="content/icon.png"/>
    <link rel="icon" href="content/icon.png"/>
    <meta charset="UTF-8">
    <title>Mage Knight Solo Table</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../../mage-knight-table/content/mk-dummy.css"/>
</head>
<style>
    .can-active {
        cursor: pointer;
    }
</style>
<body class="bg-dark">
<h1></h1>

<div class="container text-center">
    <div class="row mb-3">
        <div class="text-white">fix: fame score bug, feat: tactical cards, fix: change dummy class name, fix: change screen and char id names in dummy app</div>
        <div class="col">
            <button class="app-btn" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#referencesOffcanvas" aria-controls="referencesOffcanvas">
                References
            </button>
            <button class="app-btn" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#logsOffcanvas" aria-controls="logsOffcanvas">
                Logs
            </button>
            <button class="app-btn" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#dummyPlayerOffcanvas" aria-controls="dummyPlayerOffcanvas">
                Dummy Player
            </button>

            <div class="offcanvas offcanvas-bottom bg-dark text-white" tabindex="-1" id="logsOffcanvas"
                 aria-labelledby="logsOffcanvasLabel">
                <div class="offcanvas-body">
                    <div id="logs"></div>
                </div>
            </div>

            <div class="offcanvas offcanvas-end bg-dark" style="width: 30%" tabindex="-1" id="dummyPlayerOffcanvas"
                 aria-labelledby="dummyPlayerOffcanvasLabel">
                <div class="offcanvas-body">
                    <div class="row text-white">
                        <div class="col">
                            <div id="reset-button" data-bs-theme="dark">
                                <button type="button" class="btn-close" aria-label="Close"></button>
                            </div>
                            <div id="screen1">
                                <div>Select a character</div>
                                <div id="character-select">
                                    <button class="app-btn">
                                        <div id="char1" title="Norowas">Norowas</div>
                                    </button>
                                    <button class="app-btn">
                                        <div id="char2" title="Tovak">Tovak</div>
                                    </button>
                                    <button class="app-btn">
                                        <div id="char3" title="Goldyx">Goldyx</div>
                                    </button>
                                    <button class="app-btn">
                                        <div id="char4" title="Arythea">Arythea</div>
                                    </button>
                                    <button class="app-btn">
                                        <div id="char5" title="Wolfhawk">Wolfhawk</div>
                                    </button>
                                    <button class="app-btn">
                                        <div id="char6" title="Braevalar">Braevalar</div>
                                    </button>
                                    <button class="app-btn">
                                        <div id="char7" title="Krang">Krang</div>
                                    </button>
                                </div>
                            </div>
                            <div id="screen2">
                                <h1 id="character-name">Character</h1>
                                <div id="character-group">
                                    <div id="portrait"></div>
                                    <div id="crystal-area">
                                        <div id="red-count" class="red-crystal" title="Red Crystals">0</div>
                                        <div id="green-count" class="green-crystal" title="Green Crystals">0</div>
                                        <div id="blue-count" class="blue-crystal" title="Blue Crystals">0</div>
                                        <div id="white-count" class="white-crystal" title="White Crystals">0</div>
                                    </div>
                                </div>
                                <hr/>
                                <div id="card-area">
                                    <div>Cards Remaining</div>
                                    <div id="card-count">0</div>
                                    <div id="card-history">
                                        <div>
                                            <div class="red-card"></div>
                                            <div class="green-card"></div>
                                        </div>
                                        <div>
                                            <div class="blue-card"></div>
                                            <div class="white-card"></div>
                                        </div>

                                    </div>
                                </div>
                                <div class="btn-group" role="group" aria-label="Basic outlined example">
                                    <button class="app-btn" id="play-turn-button" title="Play Turn">PLAY TURN</button>
                                    <button class="app-btn" id="end-round-button" title="End Round">END ROUND</button>
                                </div>
                            </div>
                            <div id="screen3">
                                <h1>Add Mana Crystal</h1>
                                <div>Choose a crystal to add.</div>
                                <div id="new-crystal-select">
                                    <div id="new-mana-red" class="app-btn red-crystal" title="Red"></div>
                                    <div id="new-mana-green" class="app-btn green-crystal" title="Green"></div>
                                    <div id="new-mana-blue" class="app-btn blue-crystal" title="Blue"></div>
                                    <div id="new-mana-white" class="app-btn white-crystal" title="White"></div>
                                </div>
                            </div>
                            <div id="screen4">
                                <h1>Add New Card</h1>
                                <div>Choose a card to add.</div>
                                <div id="new-card-select">
                                    <div id="new-card-red" class="app-btn red-card" title="Red"></div>
                                    <div id="new-card-green" class="app-btn green-card" title="Green"></div>
                                    <div id="new-card-blue" class="app-btn blue-card" title="Blue"></div>
                                    <div id="new-card-white" class="app-btn white-card" title="White"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="offcanvas offcanvas-start text-start bg-dark" style="width: 37%" tabindex="-1"
                 id="referencesOffcanvas"
                 aria-labelledby="referencesOffcanvasLabel">
                <div id="canvasBody" class="offcanvas-body ">
                    <div class="accordion accordion-flush " id="accordionReferences">
                        <script>
                            let references = ['ancient_ruins', 'city', 'draconum', 'dungeon', 'end_turn', 'glade', 'grounds', 'keep', 'mage_tower', 'mines', 'monastery', 'monster_den', 'orcs', 'round', 'tomb', 'village']
                            let i = 1
                            references.forEach(reference => {
                                reference_without_underscore = reference.replace('_', ' ')
                                capitalize = reference_without_underscore.charAt(0).toUpperCase() + reference_without_underscore.slice(1)
                                document.write(`
                                      <div class="accordion-item bg-dark">
                                            <h2 class="">
                                                <button class="collapsed bg-dark text-white text-start app-btn" style="width: 100%" type="button" data-bs-toggle="collapse" data-bs-target="#collapse${i}" aria-expanded="true" aria-controls="collapse${i}">
                                                    ${capitalize}
                                                </button>
                                            </h2>
                                            <div id="collapse${i}" class="accordion-collapse collapse" data-bs-parent="#accordionReferences">
                                                <div class="accordion-body">
                                                    <img src="references/${reference}.png" class="img-fluid" alt="">
                                                </div>
                                            </div>
                                      </div>
                                    `)
                                i++
                            })
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row ">
        <div class="col">
            <div class="table-responsive">
                <table class="table table-dark table-borderless">
                    <thead>
                    <tr>
                        <th scope="col" class="col-1" style="font-size: 25px">☼</th>
                        <th scope="col" class="col-1" style="font-size: 25px">☽</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td id="day-score">0</td>
                        <td id="night-score">0</td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <table id="moves-table" class="table table-dark table-borderless">
                                <thead>
                                <tr>
                                    <th scope="col" class="col-1">Plains</th>
                                    <th scope="col" class="col-1">Hills</th>
                                    <th scope="col" class="col-1">Forest</th>
                                    <th scope="col" class="col-1">Desert</th>
                                    <th scope="col" class="col-1">Wastelands</th>
                                    <th scope="col" class="col-1">Marsh</th>
                                    <th scope="col" class="col-1">City</th>
                                    <th scope="col" class="col-1">Mountain</th>
                                    <th scope="col" class="col-1">Water</th>
                                </tr>
                                </thead>
                                <tr id="day-move-points">
                                    <td>2</td>
                                    <td>3</td>
                                    <td>3</td>
                                    <td>5</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>2</td>
                                    <td>X</td>
                                    <td>X</td>
                                </tr>
                                <tr id="night-move-points">
                                    <td>2</td>
                                    <td>3</td>
                                    <td>5</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>2</td>
                                    <td>X</td>
                                    <td>X</td>
                                </tr>
                            </table>
                        </td>
                    </tbody>
                </table>
            </div>

            <hr class="text-white"/>

            <div class="table-responsive">
                <table class="table table-dark table-borderless ">
                    <thead>
                    <tr>
                        <th colspan="99">Reputation</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td colspan="99">
                            <div class="btn-group mb-3" role="group" aria-label="Basic outlined example">
                                <button type="button" class="app-btn"
                                        onclick="app.updateReputation(-1)">-1
                                </button>
                                <button type="button" class="app-btn"
                                        onclick="app.updateReputation(+1)">+1
                                </button>
                            </div>
                        </td>
                    </tr>
                    <script>
                        document.write('<tr>');
                        let reputations = [
                            {text: "X", value: -7},
                            {text: "-5", value: -6},
                            {text: "-3", value: -5},
                            {text: "-2", value: -4},
                            {text: "-1", value: -3},
                            {text: "-1", value: -2},
                            {text: "0", value: -1},
                            {text: "0", value: 0},
                            {text: "0", value: 1},
                            {text: "+1", value: 2},
                            {text: "+1", value: 3},
                            {text: "+2", value: 4},
                            {text: "+2", value: 5},
                            {text: "+3", value: 6},
                            {text: "+5", value: 7}
                        ];
                        for (let i = 0; i < reputations.length; i++) {
                            document.write(`<td class="can-active" style="width: 6.6%" data-value="${reputations[i].value}" id="reputation|${reputations[i].value}" onclick="app.markReputationTracker(this)">${reputations[i].text}</td>`);
                        }
                        document.write('</tr>');
                    </script>
                    </tbody>
                </table>
                x
            </div>

            <hr class="text-white"/>

            <div class="table-responsive">
                <table class="table table-dark table-borderless">
                    <thead>
                    <tr>
                        <th colspan="99">Fame</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td colspan="99">
                            <div class="btn-group mb-3" role="group" aria-label="Basic outlined example">
                                <button type="button" class="app-btn" onclick="app.updateFame(+2)">
                                    +2
                                </button>
                                <button type="button" class="app-btn" onclick="app.updateFame(+3)">
                                    +3
                                </button>
                                <button type="button" class="app-btn" onclick="app.updateFame(+4)">
                                    +4
                                </button>
                                <button type="button" class="app-btn" onclick="app.updateFame(+5)">
                                    +5
                                </button>
                            </div>
                        </td>
                    </tr>
                    <script>
                        let number = 0;
                        for (let row = 1; number <= 119; row++) {
                            document.write('<tr>');
                            if (row % 2 === 1) {
                                document.write('<td class="level-up" data-symbol="command-token" style="font-size: 20px" ">⬡</td>');
                            } else {
                                document.write('<td class="level-up" data-symbol="skills" style="font-size: 20px">▯▭</td>');
                            }
                            for (let col = 0; col < 3 + (row - 1) * 2 && number <= 119; col++) {

                                let levelUp = false
                                if(col === 0) levelUp = true
                                if(col === 0 && number === 0) levelUp = false

                                document.write(`<td class="can-active" data-levelup=${levelUp} id="fame|${number}" onclick="app.markFameTracker(this)">${number}</td>`);
                                number++;
                            }
                            document.write('</tr>');
                        }
                    </script>
                    </tbody>
                </table>
            </div>

        </div>

    </div>
</div>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

<script type="text/javascript" src="../../mage-knight-table/code/app-state.js"></script>
<script type="text/javascript" src="../../mage-knight-table/code/mk-dummy.js"></script>
<script>
    let app = new AppState()
    app.initialize()

    let context = new UIContext();
</script>
</body>
</html>